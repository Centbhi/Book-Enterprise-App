<ul class="book-list">
  @for (book of books; track book.id) {
    <app-book-card [book]="book">
      <div class="book-actions">
        <button (click)="openPopup(book,'buy')">BUY</button>
        <button>ADD TO CART</button>
        <button>REMOVE</button>
      </div>
    </app-book-card>
  }
</ul>

@if (selectedBook) {
  <div class="popup-backdrop" (click)="closePopup()">
    <div class="popup" #popupRef (click)="$event.stopPropagation()">
      <app-popup-card [book]="selectedBook"></app-popup-card>
      
      <div class="popup-actions">
          <input type="number" [(ngModel)]="orderItem.quantity" min="1" [max]="selectedBook.quantityStock"
          (input)="orderItem.quantity = validateNum(orderItem.quantity,1,selectedBook.quantityStock)" />

        <button (click)="closePopup()">Cancel</button>
        <button (click)="confirmAction()">Confirm Purchase</button>
      </div>
    </div>
  </div>
}

